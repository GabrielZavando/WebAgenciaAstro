---

---

<section class="workflow" id="workflow">
  <div class="workflow-content">
    <h2 class="title-section fade-in">Así trabajamos juntos</h2>
    <p class="workflow-diagram__intro fade-in fade-in-delay-1">Un proceso claro, flexible y basado en la cooperación. Te guío de principio a fin.</p>

    <div class="workflow-diagram">
      <!-- Círculos -->
      <div class="workflow-step__circle workflow-step__circle--1 workflow-item fade-in fade-in-delay-1">
        <span class="workflow-step__number">1</span>
        <div class="workflow-step__icon">
          <i class="fas fa-search"></i>
        </div>
        <h3 class="workflow-step__title">Diagnóstico Estratégico</h3>
      </div>

      <div class="workflow-step__circle workflow-step__circle--2 workflow-item fade-in fade-in-delay-3">
        <span class="workflow-step__number">2</span>
        <div class="workflow-step__icon">
          <i class="fas fa-check-circle"></i>
        </div>
        <h3 class="workflow-step__title">Validación del MVP</h3>
      </div>

      <div class="workflow-step__circle workflow-step__circle--3 workflow-item fade-in fade-in-delay-5">
        <span class="workflow-step__number">3</span>
        <div class="workflow-step__icon">
          <i class="fas fa-rocket"></i>
        </div>
        <h3 class="workflow-step__title">Entrega y Activación</h3>
      </div>

      <div class="workflow-step__circle workflow-step__circle--4 workflow-item fade-in fade-in-delay-7">
        <span class="workflow-step__number">4</span>
        <div class="workflow-step__icon">
          <i class="fas fa-cogs"></i>
        </div>
        <h3 class="workflow-step__title">Evolución y Mantenimiento</h3>
      </div>

      <!-- Contenidos -->
      <div class="workflow-step__content workflow-step__content--1 workflow-item fade-in fade-in-delay-8">
        <p class="workflow-step__duration">2 horas</p>
        <ul class="workflow-step__list">
          <li>Definición de objetivos</li>
          <li>Requerimientos y prioridades</li>
          <li>Jerarquía de contenidos</li>
          <li>Acuerdo de trabajo</li>
          <li>Roadmap inicial</li>
        </ul>
      </div>

      <div class="workflow-step__content workflow-step__content--2 workflow-item fade-in fade-in-delay-9">
        <p class="workflow-step__duration">1 hora</p>
        <ul class="workflow-step__list">
          <li>Presentación del MVP</li>
          <li>Revisión y feedback</li>
          <li>Ajustes y nuevas prioridades</li>
          <li>Reajuste del acuerdo</li>
        </ul>
      </div>

      <div class="workflow-step__content workflow-step__content--3 workflow-item fade-in fade-in-delay-10">
        <p class="workflow-step__duration">2 horas</p>
        <ul class="workflow-step__list">
          <li>Entrega final</li>
          <li>Capacitación personalizada</li>
          <li>Puesta en marcha</li>
        </ul>
      </div>

      <div class="workflow-step__content workflow-step__content--4 workflow-item fade-in fade-in-delay-11">
        <p class="workflow-step__duration">Continuo</p>
        <ul class="workflow-step__list">
          <li>Mantenimiento mensual</li>
          <li>Soporte activo</li>
          <li>Mejoras y evolución continua</li>
        </ul>
      </div>

      <!-- Flechas -->
      <div class="workflow-step__arrow workflow-step__arrow--1 workflow-arrow fade-in fade-in-delay-2">
        <i class="fas fa-arrow-right"></i>
      </div>

      <div class="workflow-step__arrow workflow-step__arrow--2 workflow-arrow fade-in fade-in-delay-4">
        <i class="fas fa-arrow-right"></i>
      </div>

      <div class="workflow-step__arrow workflow-step__arrow--3 workflow-arrow fade-in fade-in-delay-6">
        <i class="fas fa-arrow-right"></i>
      </div>
    </div>

    <div class="workflow-footer fade-in fade-in-delay-12">
      <p class="workflow-footer__message">No estás solo en esto. Mi compromiso va más allá de la entrega: evoluciona contigo.</p>
      <a href="#contact" class="btn-cta__solid">Hablemos de tu proyecto</a>
    </div>
  </div>
</section>

<style lang="scss">
  @use '../../styles/config' as *;

  .workflow {
    padding: var(--space-xl) 0;
    background-color: var(--color-surface);
  }

  /* Themed adjustments: step backgrounds, card and circle backgrounds, shadows */
  :root[data-theme="light"] .workflow {
    --step-bg-1: #ffe0f0;
    --step-bg-2: #e9d5ff;
    --step-bg-3: #ccfff9;
    --step-bg-4: #eeeeee;
    --card-bg: var(--color-white);
    --circle-bg: var(--color-white);
    --card-shadow: var(--shadow-md);
  }

  :root[data-theme="dark"] .workflow {
    /* tonos suaves basados en los colores de marca, baja opacidad para no competir con el fondo */
    --step-bg-1: rgba(255, 0, 128, 0.08);   /* primary */
    --step-bg-2: rgba(166, 0, 255, 0.08);   /* secondary */
    --step-bg-3: rgba(0, 255, 224, 0.06);   /* accent */
    --step-bg-4: rgba(255, 255, 255, 0.03);
    --card-bg: var(--color-surface);
    --circle-bg: var(--color-surface-secondary);
    --card-shadow: 0 8px 24px rgba(0,0,0,0.45);
  }

  .workflow-content {
    width: 100%;
    max-width: #{container(narrow)}; // Usando narrow (800px) en lugar de lg
    margin: 0 auto;
    padding: 0 var(--padding-container);

    // Desde 1200px: usar ancho completo
    @include respond-to(lg) {
      max-width: #{container(max)}; // Ancho maximo desde 1200px
    }
  }

  .workflow-diagram__intro {
    text-align: center;
    font-family: var(--font-primary);
    font-size: 1.125rem;
    color: var(--color-text-secondary);
    margin-bottom: var(--space-2xl);
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
    line-height: 1.6;

    @include respond-to(md) {
      font-size: 1.25rem;
    }
  }

  // Container principal del diagrama con áreas definidas
  .workflow-diagram {
    display: grid;
    gap: var(--space-lg);
    margin-bottom: var(--space-2xl);

    // Móvil: Layout vertical
    grid-template-areas:
      "circle1"
      "content1"
      "arrow1"
      "circle2"
      "content2"
      "arrow2"
      "circle3"
      "content3"
      "arrow3"
      "circle4"
      "content4";
    grid-template-columns: 1fr;

    // Tablet: Layout 2x2
    @include respond-to(xs) {
      grid-template-areas:
        "circle1  arrow1h  circle2"
        "content1 .       content2"
        "arrow1v  .       arrow2v"
        "circle3  arrow3h  circle4"
        "content3 .       content4";
      grid-template-columns: 1fr auto 1fr;
      gap: var(--space-md);
    }

    // Desktop: Layout horizontal
    @include respond-to(lg) {
      grid-template-areas:
        "circle1  arrow1  circle2  arrow2  circle3  arrow3  circle4"
        "content1 .       content2 .       content3 .       content4";
      grid-template-columns: 1fr auto 1fr auto 1fr auto 1fr;
      grid-template-rows: auto 1fr; // Segunda fila se expande para igualar alturas
      gap: var(--space-sm);
      align-items: start;
    }
  }

  // Círculos
  .workflow-step__circle {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    width: 160px;
    height: 160px;
  border-radius: 50%;
  border: 3px solid var(--step-color);
  background-color: var(--circle-bg);
    margin: 0 auto;
    padding: var(--space-md);
    gap: var(--space-sm);
  box-shadow: var(--card-shadow);
    text-align: center;

    @include respond-to(sm) {
      width: 180px;
      height: 180px;
    }

    @include respond-to(md) {
      width: 200px;
      height: 200px;
    }

    // Posicionamiento en grid
    &--1 { grid-area: circle1; }
    &--2 { grid-area: circle2; }
    &--3 { grid-area: circle3; }
    &--4 { grid-area: circle4; }
  }

  // Contenidos
  .workflow-step__content {
  background-color: var(--card-bg);
  padding: var(--space-lg);
  box-shadow: var(--card-shadow);
    transition: all var(--transition-normal) ease;
    border: 2px solid transparent;
    display: flex;
    flex-direction: column;
    min-height: 280px; // Altura mínima igual para todas las tarjetas
    height: 100%; // Ocupa toda la altura disponible en el grid

    &:hover {
      transform: translateY(-4px);
  box-shadow: 0 18px 60px rgba(0,0,0,0.12);
    }

    @include respond-to(md) {
      padding: var(--space-xl);
      min-height: 320px; // Mayor altura en pantallas medianas
    }

    @include respond-to(lg) {
      min-height: 300px; // Altura optimizada para desktop
    }

    // Posicionamiento en grid
    &--1 { grid-area: content1; }
    &--2 { grid-area: content2; }
    &--3 { grid-area: content3; }
    &--4 { grid-area: content4; }
  }

  // Flechas
  .workflow-step__arrow {
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
    color: var(--color-primary);
    opacity: 0.8;
    align-self: center; // Centra verticalmente en el área de grid

    // Móvil: flechas hacia abajo
    &--1, &--2, &--3 {
      grid-area: arrow1;
      
      i::before {
        content: '\f063'; // fa-arrow-down
      }
    }
    
    &--2 { grid-area: arrow2; }
    &--3 { grid-area: arrow3; }

    // Tablet: flechas horizontales y verticales
    @include respond-to(xs) {
      &--1 {
        grid-area: arrow1h;
        i::before { content: '\f061'; } // fa-arrow-right
      }
      
      &--2 {
        grid-area: arrow2v;
        i::before { content: '\f063'; } // fa-arrow-down
      }
      
      &--3 {
        grid-area: arrow3h;
        i::before { content: '\f061'; } // fa-arrow-right
      }
    }

    // Desktop: todas las flechas horizontales centradas verticalmente
    @include respond-to(lg) {
      // Primero todas las declaraciones CSS
      align-self: center;
      margin-top: 0;
      
      // Luego las reglas anidadas
      &--1 { grid-area: arrow1; }
      &--2 { grid-area: arrow2; }
      &--3 { grid-area: arrow3; }
      
      i::before {
        content: '\f061'; // fa-arrow-right
      }
    }
  }

  // Elementos dentro de los círculos y contenidos
  .workflow-step__number {
    font-family: var(--font-headings);
    font-size: 1.25rem;
    font-weight: 800;
  color: var(--step-color);
    line-height: 1;

    @include respond-to(md) {
      font-size: 1.5rem;
    }
  }

  .workflow-step__icon {
    font-size: 1.5rem;
  color: var(--step-color);
    margin: var(--space-xs) 0;

    @include respond-to(md) {
      font-size: 2rem;
    }
  }

  .workflow-step__title {
    font-family: var(--font-headings);
    font-size: 0.875rem;
    font-weight: 700;
    color: var(--color-text);
    line-height: 1.2;
    max-width: 120px;

    @include respond-to(sm) {
      font-size: 0.95rem;
      max-width: 140px;
    }

    @include respond-to(md) {
      font-size: 1rem;
      max-width: 160px;
    }
  }

  .workflow-step__duration {
    font-family: var(--font-primary);
    font-size: 0.875rem;
    font-weight: 600;
  color: var(--step-color);
  text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: var(--space-lg);
    padding: var(--space-xs) var(--space-sm);
  background-color: var(--step-bg);
    display: inline-block;
    text-align: center;
    flex-shrink: 0;
  }

  .workflow-step__list {
    list-style: none;
    padding: 0;
    margin: 0;
    flex: 1;

    li {
      font-family: var(--font-primary);
      font-size: 0.9rem;
      color: var(--color-text-secondary);
      padding: var(--space-sm) 0;
      position: relative;
      padding-left: var(--space-lg);
      line-height: 1.5;
      text-align: left;

      &::before {
        content: '✓';
        position: absolute;
        left: 0;
        top: var(--space-sm);
  color: var(--step-color);
  font-weight: bold;
  font-size: 0.75rem;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background-color: var(--step-bg);
        display: flex;
        align-items: center;
        justify-content: center;
      }

      @include respond-to(md) {
        font-size: 0.95rem;
      }
    }
  }

  // Colores específicos por paso usando CSS Custom Properties
  .workflow-step__circle--1, .workflow-step__content--1, .workflow-step__arrow--1 {
    --step-color: var(--color-primary);
    --step-bg: #ffe0f0;
  }

  .workflow-step__circle--2, .workflow-step__content--2, .workflow-step__arrow--2 {
    --step-color: var(--color-secondary);
    --step-bg: #e9d5ff;
  }

  .workflow-step__circle--3, .workflow-step__content--3, .workflow-step__arrow--3 {
    --step-color: var(--color-accent);
    --step-bg: #ccfff9;
  }

  .workflow-step__circle--4, .workflow-step__content--4 {
    --step-color: var(--color-dark);
    --step-bg: #eeeeee;
  }

  // Aplicar colores a círculos
  .workflow-step__circle--1, .workflow-step__circle--2, .workflow-step__circle--4 { 
    border-color: var(--step-color);
    .workflow-step__number, .workflow-step__icon { color: var(--step-color); }
  }
  .workflow-step__circle--3 { 
    border-color: var(--step-color);
    .workflow-step__number, .workflow-step__icon { color: var(--color-dark); }
  }

  // Aplicar colores a contenidos
  .workflow-step__content--1, .workflow-step__content--2, .workflow-step__content--3, .workflow-step__content--4 {
    border-color: var(--step-color);
    .workflow-step__duration { background-color: var(--step-bg); color: var(--step-color); }
    .workflow-step__list li::before { background-color: var(--step-bg); color: var(--step-color); }
  }
  .workflow-step__content--3 .workflow-step__duration,
  .workflow-step__content--3 .workflow-step__list li::before {
    color: var(--color-dark);
  }

  // Aplicar colores a flechas
  .workflow-step__arrow--1, .workflow-step__arrow--2, .workflow-step__arrow--3 {
    color: var(--step-color);
  }

  // Footer del workflow
  .workflow-footer {
    text-align: center;
    margin-top: var(--space-2xl);

    &__message {
      font-family: var(--font-primary);
      font-size: 1.125rem;
      color: var(--color-text-secondary);
      margin-bottom: var(--space-xl);
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      line-height: 1.6;

      @include respond-to(md) {
        font-size: 1.25rem;
      }
    }
  }
</style>


